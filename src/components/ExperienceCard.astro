---
import type { Bullet } from '../data/experience';

interface Props {
    company: string;
    role: string;
    duration: string;
    bullets: Bullet[];
}

const { company, role, duration, bullets } = Astro.props;

function renderBullet(bullet: Bullet): string {
    let html = bullet.text;
    for (const highlight of bullet.highlights) {
        html = html.replace(
            highlight,
            `<span style="color: var(--color-accent);">${highlight}</span>`,
        );
    }
    return html;
}
---

<article class="experience-card gsap-animated" style="opacity: 0; transform: translateY(40px);">
    <div class="flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between">
        <h3
            class="text-lg font-bold sm:text-xl md:text-2xl"
            style="color: var(--color-text);"
        >
            {company}
        </h3>
        <span
            class="text-xs tracking-wide sm:text-sm"
            style="color: var(--color-muted);"
        >
            {duration}
        </span>
    </div>

    <p class="mt-1 text-sm" style="color: var(--color-accent);">
        {role}
    </p>

    <ul class="mt-4 flex flex-col gap-3">
        {bullets.map((bullet) => (
            <li
                class="experience-bullet gsap-animated text-sm leading-relaxed md:text-base"
                style={`color: var(--color-muted); opacity: 0; transform: translateY(20px);`}
                set:html={renderBullet(bullet)}
            />
        ))}
    </ul>
</article>

<!-- Divider line -->
<div
    class="experience-divider mx-auto my-8 h-px md:my-12"
    style="background-color: var(--color-muted); opacity: 0.2; width: 0%; max-width: 100%;"
>
</div>
